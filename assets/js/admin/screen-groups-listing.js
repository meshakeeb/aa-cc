(()=>{"use strict";var t={n:a=>{var d=a&&a.__esModule?()=>a.default:()=>a;return t.d(d,{a:d}),d},d:(a,d)=>{for(var o in d)t.o(d,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:d[o]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a)};const a=jQuery;var d=t.n(a),o=d();function n(){var t=o(this).closest(".advads-ad-group-form"),a=t.find(".advads-group-add-ad-list-ads option:selected"),d=t.find(".advads-group-add-ad-list-weights").last(),n=t.find(".advads-group-ads tbody"),e=a.val().match(/\d+/g),s="";e&&(s=advancedAds.endpoints.editAd+e.pop());var i=a.data("status"),r=a.data("status-string");a.length&&d.length&&!n.find('[name="'+a.val()+'"]').length&&n.append(o("<tr></tr>").append(o("<td></td>").html('<a target="_blank" href="'.concat(s,'">').concat(a.text(),"</a>")),o("<td></td>").html('<span class="advads-help advads-help-no-icon advads-ad-status-icon advads-ad-status-icon-'.concat(i,'">\n\t\t\t\t\t\t<span class="advads-tooltip">').concat(r,"</span>\n\t\t\t\t\t</span>")),o("<td></td>").append(d.clone().removeClass().val(d.val()).prop("name",a.val())),'<td><button type="button" class="advads-remove-ad-from-group button">x</button></td>'))}function e(){o(this).closest("tr").remove()}function s(t){t.each((function(){var t=d()(this);t.closest(".advads-ad-group-form").find(".advads-option:not(.static)").hide();var a=t.val();t.parents(".advads-ad-group-form").find(".advads-group-type-"+a).show()}))}const i=wp.apiFetch;var r=t.n(i);function c(t,a){void 0===a&&(a=!0),t.useableInputs||(t.useableInputs=d()(t).closest("dialog").find("select,input,textarea,button,a.button").not(":disabled")),t.useableInputs.prop("disabled",a)}function l(t){var a=d()(t),o=a.serialize();c(t),r()({path:"/advanced-ads/v1/group",method:"PUT",data:{fields:o}}).then((function(d){if(d.error)return c(t,!1),a.prepend('<div class="notice error advads-notice advads-notice-icon inline"><p>'.concat(d.error,"</p></div>")),void a.closest(".advads-modal-content").scrollTop(0);var o=t.closest("dialog");o.advadsTermination.resetInitialValues(),d.reload?window.location.reload():o.close()}))}function u(t){var a=d()(t),o=a.serialize();c(t),r()({path:"/advanced-ads/v1/group",method:"POST",data:{fields:o}}).then((function(d){if(d.error)return c(t,!1),a.prepend('<div class="notice error advads-notice advads-notice-icon inline"><p>'.concat(d.error,"</p></div>")),void a.closest(".advads-modal-content").scrollTop(0);t.closest("dialog").advadsTermination.resetInitialValues(),document.location.href="#modal-group-edit-".concat(d.group_data.id),document.location.reload()}))}d()((function(){o(".advads-group-add-ad button").on("click",n),o("#advads-ad-group-list").on("click",".advads-remove-ad-from-group",e),o(".advads-ad-group-type input").on("click",(function(){s(o(this))})),s(o(".advads-ad-group-type input:checked")),wp.hooks.addFilter("advanced-ads-submit-modal-form","advancedAds",(function(t,a){return"advads-group-new-form"===a.id?(u(a),!1):t})),wp.hooks.addFilter("advanced-ads-submit-modal-form","advancedAds",(function(t,a){return"update-group"===a.name?(l(a),!1):t})),d()('[id^="modal-group-edit-"]').each((function(){d()(this).find(".tablenav.bottom").html('<button class="button button-primary submit-edit-group">'.concat(window.advadstxt.group_forms.save,"</button>"))})),d()("#modal-group-new").find(".tablenav.bottom").html('<button class="button button-primary" id="submit-new-group">'.concat(window.advadstxt.group_forms.save_new,"</button>")),d()(document).on("click",".submit-edit-group",(function(){l(d()(this).closest("dialog").find("form")[0])})),d()(document).on("click","#submit-new-group",(function(){var t=d()("#advads-group-new-form"),a=t.closest("dialog")[0].closeValidation;window[a.function](a.modal_id)&&u(t[0])})),d()(document).on("click","#advads-ad-group-list .delete-tag",(function(t){if(t.preventDefault(),confirm(window.advadstxt.group_forms.confirmation.replace("%s",d()(this).closest("div").siblings(".advads-table-name").find("a").text()))){var a=new URLSearchParams(d()(this).attr("href")),o=d()(this).closest("tr");r()({path:"/advanced-ads/v1/group",method:"DELETE",data:{id:a.get("group_id"),nonce:a.get("_wpnonce")}}).then((function(t){t.done&&o.remove()}))}}))}))})();